@model Pitchball.Infrastructure.ViewModels.Pitch.PitchViewModel
@using Microsoft.AspNetCore.Http;
<link rel="stylesheet" href="~/css/Pitch.css" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
@{
    ViewBag.Title = Model.Pitch.Name;
}
<div class="card border-secondary text-light  ">
    <div class="card-header text-center text-light border-light bg-dark"><h1><b>@Model.Pitch.Name</b></h1></div>
    <div class="bg-dark">
        <div class="row col-md-12">
            <div class="col-md-6">
                @{
                    var image = Url.Action("GetPictureAsync", "Pitch", Model.Pitch.Id);
                    <img src="@image" class=" img-responsive img-fluid img-thumbnail card-img" alt="Alternate Text" /><br />
                }
            </div>
            <div class="col-md-6 text-center smaller">
                <h3 class="text-center"><b>Informacje o obiekcie</b></h3>
                <hr />
                <div class="row col-md-12">
                    <div class="col-md-6 text-right">
                        <big><b>ULICA:</b></big>
                    </div>
                    <div class="col-md-6 text-left"><big> @Model.Pitch.Street </big></div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6 text-right">
                        <big><b>MIASTO:</b></big>
                    </div>
                    <div class="col-md-6 text-left"><big> @Model.Pitch.City </big></div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6 text-right">
                        <big><b>NAWIERZCHNIA:</b></big>
                    </div>
                    <div class="col-md-6 text-left"><big> @Model.Pitch.Surface </big></div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-6 text-right">
                        <big><b>OŚWIETLENIE: </b></big>
                    </div>
                    <div class="col-md-6 text-left">
                        <big> @Model.Pitch.Lighting </big>
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
                <br />

                @if (Context.Session.GetString("Role") == "Captain")
                {
                    <div class="col-md-12 ">
                        <div class="card">
                            <a href="@Url.Action("CreateReservation", "Reservation")" class="btn btn-success">Dodaj rezerwację</a>
                        </div>
                    </div>
                }
                <br />
            </div>
        </div>
    </div>





    <ul class="nav nav-tabs " style="margin-top:1%;" role="tablist">
        <li class="nav-item  ">
            <a class="nav-link text-dark active tabNav" data-toggle="tab" href="#reservations"><big><b>Rezerwacje</b></big></a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-dark tabNav" data-toggle="tab" href="#comments"><big><b>Komentarze</b></big></a>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div id="reservations" class="container tab-pane active">
            <br />
            <div class="table-responsive-sm">
                <table class="table table-light">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Lp.</th>
                            <th scope="col">Nazwa rezerwacji</th>
                            <th scope="col">Początek rezerwacji</th>
                            <th scope="col">Koniec Rezerwacji</th>
                            <th scope="col">Login rezerwującego</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Pitch.Reservations == null || !Model.Pitch.Reservations.Any())
                        {
                            <p class="card-text">Nie ma jeszcze rezerwacji na to boisko</p>
                        }
                        else
                        {
                            <div class="list-group">
                                @foreach (var reservation in Model.Pitch.Reservations.OrderByDescending(x => x.CreatedAt))
                                {

                                    <tr class="table-row">
                                        <th scope="row">@for (int i = 1; i <= Model.Pitch.Reservations.Count(); i++)
                                        {
                                            @i;
                                        }</th>
                                        <td>@reservation.Name </td>
                                        <td>@reservation.StartDate</td>
                                        <td>@reservation.EndDate</td>
                                        <td>@reservation.Captain.Login</td>
                                    </tr>
                                }
                            </div>
                        }
                </div>
            </tbody>
            </table>
        </div>
        </div>
        <div id="comments" class="container tab-pane fade">
            <br>
        </div>
    </div>
</div>


